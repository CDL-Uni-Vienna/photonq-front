{"version":3,"file":"component---src-pages-profile-tsx-d21aa6cdc2c4d38bce00.js","mappings":"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","sources":["webpack://my-gatsby-site/./src/components/LoadingButton.tsx","webpack://my-gatsby-site/./src/components/Profile/ProfileContentContainer.tsx","webpack://my-gatsby-site/./src/components/Profile/ProfileSection.tsx","webpack://my-gatsby-site/./src/components/Profile/ProfileSectionHeader.tsx","webpack://my-gatsby-site/./src/components/Profile/Sections/ProfileDetailSection.tsx","webpack://my-gatsby-site/./src/pages/profile.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  Button,\n  ButtonProps,\n  ButtonTypeMap,\n  CircularProgress,\n} from \"@mui/material\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface LoadingButtonProps\n  extends ButtonProps<ButtonTypeMap[\"defaultComponent\"], {}> {\n  isLoading: boolean;\n  text: string;\n}\n\nexport default function LoadingButton({\n  isLoading,\n  text,\n  ...props\n}: LoadingButtonProps) {\n  const { t } = useTranslation();\n  return (\n    <Button {...props} variant={\"contained\"}>\n      {isLoading ? (\n        <CircularProgress size={20} style={{ color: \"white\" }} />\n      ) : (\n        t(text)\n      )}\n    </Button>\n  );\n}\n","import clsx from 'clsx'\nimport React, {ReactNode} from 'react'\n\ninterface ProfileContentContainerProps {\n  children: ReactNode\n  withSpaceBetween?: boolean\n}\n\nexport default function ProfileContentContainer({\n  children,\n  withSpaceBetween\n}: ProfileContentContainerProps) {\n  return (\n    <div\n      className={clsx('border p-6', {\n        'space-y-5': withSpaceBetween\n      })}>\n      {children}\n    </div>\n  )\n}\n","import React, { ReactNode } from \"react\";\nimport clsx from \"clsx\";\n\ninterface ProfileSectionProps {\n  children: ReactNode;\n  withBottomSpace?: boolean;\n}\n\nexport default function ProfileSection({\n  children,\n  withBottomSpace,\n}: ProfileSectionProps) {\n  return (\n    <div\n      className={clsx(\"pt-16 px-8 space-y-3\", {\n        \"pb-16\": withBottomSpace,\n      })}\n    >\n      {children}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Button, Typography } from \"@mui/material\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface ProfileSectionHeaderProps {\n  header: string;\n  withEditButton?: boolean;\n  onClick?: () => void;\n}\n\nexport default function ProfileSectionHeader({\n  header,\n  withEditButton,\n  onClick,\n}: ProfileSectionHeaderProps) {\n  const { t } = useTranslation();\n  return (\n    <div className={\"flex justify-between\"}>\n      <Typography variant={\"h5\"} component={\"h2\"} fontWeight={\"bold\"}>\n        {t(header)}\n      </Typography>\n      {withEditButton && <Button onClick={onClick}>{t(\"Edit\")}</Button>}\n    </div>\n  );\n}\n","import {\n  Alert,\n  Button,\n  Snackbar,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  TextField\n} from '@mui/material'\nimport {red} from '@mui/material/colors'\nimport {\n  deleteUser,\n  requestForInformation,\n  resetPassword\n} from '@snek-functions/origin'\nimport React, {useContext, useState} from 'react'\nimport {useTranslation} from 'react-i18next'\nimport {User} from '../../../model/types/type.user'\nimport {AuthContext} from '../../../providers/AuthProvider'\nimport LoadingButton from '../../LoadingButton'\nimport ProfileContentContainer from '../ProfileContentContainer'\nimport ProfileSection from '../ProfileSection'\nimport ProfileSectionHeader from '../ProfileSectionHeader'\n\nconst tableKeys: (keyof User)[] = ['firstName', 'lastName', 'email']\n\nexport default function ProfileDetailSection() {\n  const {t} = useTranslation()\n  const [error, setError] = useState('')\n  const {value: user, setValue: setUser} = useContext(AuthContext)\n  const [isEditing, setIsEditing] = useState(false)\n\n  const [isLoadingReset, setIsLoadingReset] = useState(false)\n  const [isLoadingData, setIsLoadingData] = useState(false)\n  const [isLoadingDelete, setIsLoadingDelete] = useState(false)\n\n  const [dataRequested, setDataRequested] = useState(false)\n  const [resetRequested, setResetRequested] = useState(false)\n  const [deleteRequested, setDeleteRequested] = useState(false)\n\n  const resetSnekbar = () => {\n    setResetRequested(false)\n    setDeleteRequested(false)\n    setDataRequested(false)\n  }\n  const onDataRequest = async () => {\n    setIsLoadingData(true)\n    try {\n      setError('')\n\n      await requestForInformation({\n        additional: ''\n      })\n\n      resetSnekbar()\n      setDataRequested(true)\n    } catch (e) {\n      setError(e.message)\n    } finally {\n      setIsLoadingData(() => false)\n    }\n  }\n\n  const onDeleteUser = async () => {\n    setIsLoadingDelete(true)\n    try {\n      setError('')\n\n      await deleteUser({\n        email: user!.email\n      })\n\n      resetSnekbar()\n      setDeleteRequested(true)\n    } catch (e) {\n      setError(e.message)\n    } finally {\n      setIsLoadingDelete(() => false)\n    }\n  }\n  const onResetPassword = async () => {\n    setIsLoadingReset(true)\n    try {\n      setError('')\n\n      await resetPassword({\n        email: user!.email\n      })\n\n      resetSnekbar()\n      setResetRequested(true)\n    } catch (e) {\n      setError(e.message)\n    } finally {\n      setIsLoadingReset(() => false)\n    }\n  }\n\n  if (!user) return null\n\n  const handleOnChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\n    key: keyof User\n  ) => {\n    setUser(prev => ({\n      ...prev!,\n      [key]: e.target.value!\n    }))\n  }\n\n  return (\n    <ProfileSection withBottomSpace>\n      <ProfileSectionHeader header={t('Details')} />\n      <ProfileContentContainer>\n        <Table>\n          <TableBody>\n            {Object.keys(user)\n              .filter(key => tableKeys.includes(key as keyof User))\n              .map((key, index) => (\n                <TableRow key={index}>\n                  <TableCell>\n                    {key === 'email' ? 'E-MAIL' : t(key).toUpperCase()}\n                  </TableCell>\n                  <TableCell>\n                    {key !== 'email' && isEditing ? (\n                      <TextField\n                        onChange={e => handleOnChange(e, key as keyof User)}\n                        value={user[key as keyof User]}\n                        variant={'standard'}\n                        fullWidth\n                      />\n                    ) : (\n                      user[key as keyof User]\n                    )}\n                  </TableCell>\n                </TableRow>\n              ))}\n          </TableBody>\n        </Table>\n        <Button\n          sx={{mt: 3, mr: 2}}\n          onClick={() => setIsEditing(!isEditing)}\n          variant={'contained'}\n          size={'medium'}>\n          {t('Update Details')}\n        </Button>\n        <LoadingButton\n          sx={{mt: 3, mr: 2}}\n          onClick={() => onResetPassword()}\n          disabled={resetRequested}\n          text={t('Update password')}\n          isLoading={isLoadingReset}\n          size={'medium'}\n          variant={'contained'}\n        />\n        <LoadingButton\n          sx={{mt: 3, mr: 2}}\n          onClick={() => onDataRequest()}\n          disabled={dataRequested}\n          text={t('Send GDPR Data')}\n          isLoading={isLoadingData}\n          size={'medium'}\n          variant={'contained'}\n        />\n        <LoadingButton\n          sx={{mt: 3, mr: 2}}\n          onClick={() => onDeleteUser()}\n          disabled={deleteRequested}\n          text={t('Delete account')}\n          isLoading={isLoadingDelete}\n          size={'medium'}\n          style={!deleteRequested ? {backgroundColor: red.A700} : undefined}\n          variant={'contained'}\n        />\n        {error.length ? (\n          <div style={{color: red.A700}} className={'flex justify-center'}>\n            *{t(error)}\n          </div>\n        ) : null}\n      </ProfileContentContainer>\n      <Snackbar open={resetRequested} autoHideDuration={2000}>\n        <Alert variant=\"filled\" severity=\"success\" sx={{width: '100%'}}>\n          Reset password email sent! Please check your inbox.\n        </Alert>\n      </Snackbar>\n      <Snackbar open={dataRequested} autoHideDuration={2000}>\n        <Alert variant=\"filled\" severity=\"success\" sx={{width: '100%'}}>\n          GDPR data email sent! Please check your inbox.\n        </Alert>\n      </Snackbar>\n      <Snackbar open={deleteRequested} autoHideDuration={2000}>\n        <Alert variant=\"filled\" severity=\"success\" sx={{width: '100%'}}>\n          Delete account email sent! Please check your inbox.\n        </Alert>\n      </Snackbar>\n    </ProfileSection>\n  )\n}\n","import {connectPage, Field} from '@jaenjs/jaen'\nimport {Container} from '@mui/system'\nimport {graphql, PageProps} from 'gatsby'\nimport React from 'react'\nimport ContentContainer from '../components/Layout/ContentContainer'\nimport NavbarPadding from '../components/Layout/NavbarPadding'\nimport PageLayout from '../components/Layout/PageLayout'\nimport SectionHeader from '../components/Layout/SectionHeader'\nimport ProfileDetailSection from '../components/Profile/Sections/ProfileDetailSection'\n\nexport function ProfilePage(props: PageProps) {\n  return (\n    <PageLayout pathname={props.path}>\n      <Container maxWidth=\"xl\">\n        <NavbarPadding />\n        <SectionHeader\n          header={\n            <Field.Text name=\"sectionHeader\" defaultValue={'My Profile'} />\n          }\n          withVerticalSpacing\n        />\n        <ContentContainer>\n          <ProfileDetailSection />\n        </ContentContainer>\n        <NavbarPadding />\n      </Container>\n    </PageLayout>\n  )\n}\n\nexport const query = graphql`\n  query ($jaenPageId: String!) {\n    ...JaenPageQuery\n  }\n`\n\nexport default connectPage(ProfilePage, {displayName: 'ProfilePage'})\n"],"names":["LoadingButton","isLoading","text","props","t","useTranslation","_jsx","Button","variant","CircularProgress","size","style","color","ProfileContentContainer","children","withSpaceBetween","className","clsx","ProfileSection","withBottomSpace","ProfileSectionHeader","header","withEditButton","onClick","_jsxs","Typography","component","fontWeight","tableKeys","ProfileDetailSection","useState","error","setError","useContext","AuthContext","user","value","setUser","setValue","isEditing","setIsEditing","isLoadingReset","setIsLoadingReset","isLoadingData","setIsLoadingData","isLoadingDelete","setIsLoadingDelete","dataRequested","setDataRequested","resetRequested","setResetRequested","deleteRequested","setDeleteRequested","resetSnekbar","onDataRequest","requestForInformation","additional","_context","message","onDeleteUser","deleteUser","email","_context2","onResetPassword","resetPassword","_context3","Table","TableBody","Object","keys","filter","key","includes","map","index","TableRow","TableCell","toUpperCase","TextField","onChange","e","prev","target","handleOnChange","fullWidth","sx","mt","mr","disabled","undefined","backgroundColor","red","length","Snackbar","open","autoHideDuration","Alert","severity","width","ProfilePage","PageLayout","pathname","path","Container","maxWidth","NavbarPadding","SectionHeader","Field","name","defaultValue","withVerticalSpacing","ContentContainer","connectPage","displayName"],"sourceRoot":""}